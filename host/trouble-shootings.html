<!DOCTYPE html><!--[if lte IE 7]> <html class="no-js ie67 ie678" lang="en"> <![endif]-->
<!--[if IE 8]> <html class="no-js ie8 ie678" lang="en"> <![endif]-->
<!--[if IE 9]> <html class="no-js ie9" lang="en"> <![endif]-->
<html lang="en">
  <head>
    <meta charset="utf-8"><!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">
    <link rel="shortcut icon" href="/assets/images/favicon.png">
    <title>Trouble Shootings
    </title><link  rel="stylesheet" href="/vendors/css/knacss.css" /><link  rel="stylesheet" href="/vendors/css/sunburst.css" /><link  rel="stylesheet" href="/assets/css/main.css" /><link  rel="stylesheet" href="/assets/css/home.css" />
  </head>
  <body>
    <div class="navbar fixed"><a href="/" class="nav-logo left"><img src="/assets/images/happycloud.png" alt="Happy Cloud"></a><span class="subtitle">
        <div class="breadcrumb-item"><a href="/host/install.html">Install</a>
        </div>
        <div class="breadcrumb-item"><a href="/host/manage.html">Manage</a>
        </div>
        <div class="breadcrumb-item"><a href="/host/uninstall.html">Uninstall</a>
        </div>
        <div class="breadcrumb-item current"><a href="/host/trouble-shootings.html">Trouble Shootings</a>
        </div></span>
      <div class="submenu-container right"><a href="/hack/getting-started/">Hack</a></div>
      <div class="submenu-container right selected"><a href="/host/install.html">Host</a></div>
    </div>
    <div class="wrapper">
      <div class="wrap-menu w25 mod left">&nbsp;
        <aside>
          <p class="title toc">Trouble Shootings</p>
          <nav id="navigation" role="navigation">
            <ul class="nav first-level">
              <li class="big"><a href="#i-can-only-install-one-application" class="label">I can only install one application</a>
                <ul class="second-level">
                </ul>
              </li>
              <li class="big"><a href="#install-never-ends-until-i-refresh-the-page-f5-" class="label">Install never ends until I refresh the page (F5)</a>
                <ul class="second-level">
                </ul>
              </li>
              <li class="big"><a href="#server-error-occured-on-login" class="label">Server error occured on login</a>
                <ul class="second-level">
                  <li class="small"><a href="#problem-with-home" class="label">Problem with home</a></li>
                  <li class="small"><a href="#problem-with-data-system" class="label">Problem with data-system</a></li>
                  <li class="small"><a href="#npm-errors" class="label">Npm errors</a></li>
                </ul>
              </li>
              <li class="big"><a href="#arm-processors" class="label">ARM processors</a>
                <ul class="second-level">
                  <li class="small"><a href="#node-js" class="label">Node.js</a></li>
                  <li class="small"><a href="#nginx" class="label">Nginx</a></li>
                </ul>
              </li>
              <li class="big"><a href="#cozy-controller-not-started" class="label">Cozy Controller not started</a>
                <ul class="second-level">
                </ul>
              </li>
              <li class="big"><a href="#couchdb-password" class="label">CouchDB password</a>
                <ul class="second-level">
                </ul>
              </li>
              <li class="big"><a href="#process-duplication" class="label">Process duplication</a>
                <ul class="second-level">
                </ul>
              </li>
            </ul>
          </nav>
        </aside>
      </div>
      <div id="main" role="main" class="mod pam w75"><h1 id="trouble-shootings">Trouble shootings</h1>
<p>In this section, you will find common errors that occur during the
installation process.
Mention us the problems you encoutered, and which are not listed here, and we will add them to the list as soon as possible.</p>
<h2 id="i-can-only-install-one-application">I can only install one application</h2>
<p>When you try to install an application it is marked as broken and it has the same behaviour for each additional application.</p>
<p>Check the amount of RAM available on your system by clicking on the manage button on your home page. If you RAM machine is full, that means your Cozy can't install new applications.</p>
<h2 id="install-never-ends-until-i-refresh-the-page-f5-">Install never ends until I refresh the page (F5)</h2>
<p>That's because the data-system module is not properly synchronized with the database. Just restart the data system and everything should be back to normal.</p>
<pre class="highlight"><code class="bash"><span class="hljs-comment"># On the cozy host</span>
<span class="hljs-built_in">sudo</span> cozy-monitor restart data-system
</code></pre>
<h2 id="server-error-occured-on-login">Server error occured on login</h2>
<h3 id="problem-with-home">Problem with home</h3>
<p>Check that your home is installed. In your browser go to <em><a href="https://yourcozyurl/status">https://yourcozyurl/status</a></em>
Check that everything is set to true. If Home is marked as false, that means it is not running. To solve this problem, type the following commands in a terminal of your remote server:</p>
<pre class="highlight"><code class="bash">cozy-monitor uninstall home
cozy-monitor install home
</code></pre>
<h3 id="problem-with-data-system">Problem with data-system</h3>
<p>Check the log of your data-system in <code>/usr/local/cozy/apps/data-system/data-system/cozy-data-system/log/production.log</code>.
If logs contain "Database cozy on localhost:5984 doesn't exist." and "The database could not be created, the file already exists.", that means data-system cannot connect to cozy database. To solve this problem, type the following commands in a terminal of your remote server :</p>
<pre class="highlight"><code class="bash">cozy-monitor uninstall data-system
cozy-monitor install data-system
cozy-monitor restart home
cozy-monitor restart proxy
</code></pre>
<h3 id="npm-errors">Npm errors</h3>
<p>Cozy is based on Node.js applications. Node.js apps download their dependencies from the NPM registry. Sometimes this registry is not stable. So, if you encounter NPM related errors, try to run the installation again.</p>
<h2 id="arm-processors">ARM processors</h2>
<h3 id="node-js">Node.js</h3>
<p>Node.js requires a specific configuration to be built on an ARM processor. Actually, the version that is set up only supports Raspberry Pi like processors (ARMv6).</p>
<h3 id="nginx">Nginx</h3>
<p>We didn't find yet a good solution to setting up Nginx on a Raspberry. We are still
working on it. If you want to help us with solving this issue, feel free to
contribute!</p>
<p>Here is a good tutorial to install Nginx on your Raspberry Pi: <a href="http://virtualitblog.blogspot.fr/2013/05/install-nginx-141-raspberry-pi.html">http://virtualitblog.blogspot.fr/2013/05/install-nginx-141-raspberry-pi.html</a></p>
<p>Package can be downloaded there: <a href="http://nginx.org/packages/debian/pool/nginx/n/nginx/">http://nginx.org/packages/debian/pool/nginx/n/nginx/</a></p>
<h2 id="cozy-controller-not-started">Cozy Controller not started</h2>
<p>If you get ECONNRESET when installing apps using the cozy-monitor, check if the cozy-controller is correctly started</p>
<pre class="highlight"><code class="bash"><span class="hljs-built_in">sudo</span> supervisorctl
</code></pre>
<p>and check if the cozy-monitor is using port 9002</p>
<pre class="highlight"><code class="bash"><span class="hljs-built_in">sudo</span> netstat -plunt | grep <span class="hljs-number">9002</span>
tcp     <span class="hljs-number">0</span>     <span class="hljs-number">0</span> <span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>:<span class="hljs-number">9002</span>      <span class="hljs-number">0.0</span>.<span class="hljs-number">0.0</span>:*        LISTEN      <span class="hljs-number">997</span>/node
</code></pre>
<h2 id="couchdb-password">CouchDB password</h2>
<p>If you run several times the installation, the db password and the password used
by the data-system could become different. To reset the password, comment the
last line of <code>/usr/local/etc/couch/local.ini</code> in the admin section. Delete the
file <code>/etc/cozy/couchdb.login</code> Then run installation again or run this command:</p>
<pre class="highlight"><code class="bash">fab config_couchdb
</code></pre>
<h2 id="process-duplication">Process duplication</h2>
<p>Sometimes a Node.js process duplication occurs. In that case, the simplest way
to go back to normal is to run the following commands:</p>
<pre class="highlight"><code class="bash"><span class="hljs-built_in">sudo</span> supervisorctl stop cozy-controller
<span class="hljs-built_in">sudo</span> pkill -<span class="hljs-number">9</span> node
<span class="hljs-built_in">sudo</span> supervisorctl start cozy-controller
</code></pre>

      </div>
      <footer id="footer" role="contentinfo" class="line pam row"><a href="https://github.com/mycozycloud">Github</a><a href="irc://irc.freenode.net/cozycloud">IRC</a><a href="mailto:contact@cozycloud.cc">Contact</a><a href="https://groups.google.com/forum/?fromgroups#!forum/cozy-cloud">Mailing-list</a><a href="https://cozycloud.cc">Cozy Cloud</a></footer>
    </div><script defer="defer"  src="/vendors/javascripts/jquery-2.0.3.min.js"></script><script defer="defer"  src="/vendors/javascripts/bootstrap.min.js"></script><script defer="defer"  src="/assets/javascripts/main.js"></script>
  </body>
</html>